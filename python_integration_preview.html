<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nemo Python Integration Preview</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
            color: #334155;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .header h1 {
            color: #1e293b;
            margin: 0 0 10px 0;
            font-size: 2.5rem;
        }
        .header p {
            color: #64748b;
            font-size: 1.1rem;
        }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        .feature-card {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-left: 4px solid #3b82f6;
        }
        .feature-card h3 {
            color: #1e293b;
            margin: 0 0 12px 0;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .feature-card p {
            margin: 0 0 16px 0;
            line-height: 1.6;
        }
        .code-demo {
            background: #f1f5f9;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }
        .demo-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .demo-buttons {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
            margin: 16px 0;
        }
        .btn {
            padding: 8px 16px;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            background: white;
            color: #475569;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }
        .btn:hover {
            background: #f8fafc;
            border-color: #3b82f6;
        }
        .btn.primary {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }
        .btn.primary:hover {
            background: #2563eb;
        }
        .output-demo {
            background: #0f172a;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 16px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            margin-top: 12px;
            white-space: pre-wrap;
        }
        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .status-ready {
            background: #dcfce7;
            color: #166534;
        }
        .emoji {
            font-size: 1.2rem;
        }
        .integration-flow {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 12px;
            padding: 24px;
            margin: 20px 0;
        }
        .flow-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }
        .flow-step {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🐍 Nemo Python Integration Preview</h1>
            <p>Comprehensive medical data analysis with Python execution</p>
            <span class="status-badge status-ready">
                ✅ Integration Complete
            </span>
        </div>

        <div class="integration-flow">
            <h2>🔄 Integration Flow</h2>
            <p>How Python execution works in your Nemo medical AI platform:</p>
            <div class="flow-steps">
                <div class="flow-step">
                    <div class="emoji">👩‍⚕️</div>
                    <h4>User Input</h4>
                    <p>Medical researcher uploads data & asks questions</p>
                </div>
                <div class="flow-step">
                    <div class="emoji">🤖</div>
                    <h4>AI Generation</h4>
                    <p>AI generates Python analysis code</p>
                </div>
                <div class="flow-step">
                    <div class="emoji">🐍</div>
                    <h4>Python Execution</h4>
                    <p>Enhanced executor runs code securely</p>
                </div>
                <div class="flow-step">
                    <div class="emoji">📊</div>
                    <h4>Medical Insights</h4>
                    <p>Results displayed with clinical context</p>
                </div>
            </div>
        </div>

        <div class="features-grid">
            <div class="feature-card">
                <h3><span class="emoji">🎯</span> Smart Action Buttons</h3>
                <p>One-click statistical analysis with enhanced ChatPanel buttons:</p>
                <div class="demo-buttons">
                    <button class="btn">📊 Stats</button>
                    <button class="btn">👥 T-Test</button>
                    <button class="btn">🔗 Correlations</button>
                    <button class="btn primary">🏥 Medical Analysis</button>
                </div>
                <p><strong>What they do:</strong> Generate and execute Python code for common medical statistical analyses.</p>
            </div>

            <div class="feature-card">
                <h3><span class="emoji">🏥</span> Medical Analysis Engine</h3>
                <p>Comprehensive medical data analysis including:</p>
                <ul>
                    <li>📊 Data quality assessment</li>
                    <li>👥 Demographics analysis (age, gender)</li>
                    <li>🩺 Medical metrics (BP, BMI classifications)</li>
                    <li>🔗 Correlation analysis</li>
                    <li>🧪 Statistical significance testing</li>
                </ul>
            </div>

            <div class="feature-card">
                <h3><span class="emoji">⚡</span> Performance Monitoring</h3>
                <p>Track execution metrics for optimization:</p>
                <div class="code-demo">
Execution time: 1.23s
Memory used: 45MB
Libraries available: 8/10
Python version: 3.11.5
                </div>
            </div>

            <div class="feature-card">
                <h3><span class="emoji">🔒</span> Security & Compliance</h3>
                <p>HIPAA-compliant execution with:</p>
                <ul>
                    <li>🛡️ Resource limits and timeouts</li>
                    <li>🏠 Local-only processing</li>
                    <li>📊 Memory usage monitoring</li>
                    <li>🔍 Error isolation</li>
                </ul>
            </div>
        </div>

        <div class="demo-section">
            <h2>📋 Live Demo: Medical Analysis Output</h2>
            <p>Here's what users see when they click "Medical Analysis" on patient data:</p>
            
            <div class="output-demo">🏥 COMPREHENSIVE MEDICAL DATA ANALYSIS
==================================================

📊 Dataset: 1,250 patients, 8 variables
📊 Variables: ['patient_id', 'age', 'gender', 'systolic_bp', 'diastolic_bp', 'bmi', 'diagnosis', 'treatment']

📋 DATA QUALITY ASSESSMENT:
  patient_id: int64, Missing: 0 (0.0%)
  age: float64, Missing: 5 (0.4%)
  gender: object, Missing: 0 (0.0%)
  systolic_bp: float64, Missing: 12 (1.0%)
  diastolic_bp: float64, Missing: 12 (1.0%)
  bmi: float64, Missing: 8 (0.6%)
  diagnosis: object, Missing: 0 (0.0%)
  treatment: object, Missing: 0 (0.0%)

👥 AGE ANALYSIS (age):
  Mean age: 62.3 years
  Age range: 18 - 95 years
  Median age: 64.0 years

  Age Group Distribution:
    <30: 87 (7.0%)
    30-50: 298 (23.8%)
    50-65: 456 (36.5%)
    65+: 409 (32.7%)

⚧ GENDER ANALYSIS (gender):
  Female: 678 (54.2%)
  Male: 572 (45.8%)

🩸 BLOOD PRESSURE ANALYSIS:
  SYSTOLIC_BP:
    Mean: 134.2 mmHg
    Range: 90 - 180 mmHg
    Normal (90-139): 756 (60.5%)
    High (≥140): 482 (38.6%)
    Low (<90): 12 (1.0%)

📏 BMI ANALYSIS (bmi):
  Mean BMI: 26.8
  Underweight (<18.5): 23 (1.8%)
  Normal (18.5-24.9): 445 (35.6%)
  Overweight (25-29.9): 456 (36.5%)
  Obese (≥30): 326 (26.1%)

🔗 CORRELATION ANALYSIS:
  Strong correlations (|r| > 0.5):
    age ↔ systolic_bp: r = 0.623
    bmi ↔ diastolic_bp: r = 0.542

🧪 STATISTICAL TESTS:
  T-test: systolic_bp by gender
    Female mean: 132.45 (n=678)
    Male mean: 136.28 (n=572)
    t-statistic: -3.4521
    p-value: 0.000573
    Significant: Yes (α=0.05)

✅ MEDICAL ANALYSIS COMPLETE!

📋 SUMMARY RECOMMENDATIONS:
• Review data quality and missing values
• Consider clinical significance of statistical findings
• Validate results with domain expertise
• Check for potential confounding variables</div>
        </div>

        <div class="demo-section">
            <h2>🛠️ Implementation Status</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <h3>✅ Backend Integration</h3>
                    <ul>
                        <li>Enhanced Python executor</li>
                        <li>API endpoint <code>/api/execute-python</code></li>
                        <li>Medical library management</li>
                        <li>Performance monitoring</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>✅ Frontend Integration</h3>
                    <ul>
                        <li>Updated ChatPanel component</li>
                        <li>Python output display</li>
                        <li>Medical analysis buttons</li>
                        <li>Error handling UI</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>✅ Python Environment</h3>
                    <ul>
                        <li>System Python detection</li>
                        <li>Bundled Python fallback</li>
                        <li>Medical libraries ready</li>
                        <li>Resource management</li>
                    </ul>
                </div>
                <div class="feature-card">
                    <h3>✅ Medical Features</h3>
                    <ul>
                        <li>Auto-detect medical variables</li>
                        <li>Clinical classifications</li>
                        <li>Statistical testing</li>
                        <li>Research recommendations</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="demo-section">
            <h2>🚀 Ready to Use</h2>
            <p><strong>Your Python execution system is fully integrated and ready for medical researchers!</strong></p>
            
            <h3>To start using:</h3>
            <ol>
                <li><strong>Start Backend:</strong> <code>cd backend && python app.py</code></li>
                <li><strong>Start Frontend:</strong> <code>npm run dev</code></li>
                <li><strong>Upload medical data</strong> and click "Medical Analysis"</li>
                <li><strong>Ask natural language questions</strong> about your data</li>
            </ol>

            <h3>Key Benefits:</h3>
            <ul>
                <li>🏥 <strong>Medical-specific:</strong> Understands healthcare data patterns</li>
                <li>🔒 <strong>HIPAA-compliant:</strong> All processing stays local</li>
                <li>⚡ <strong>Fast:</strong> Optimized execution with performance monitoring</li>
                <li>🎯 <strong>User-friendly:</strong> One-click analysis for researchers</li>
                <li>🤖 <strong>AI-powered:</strong> Natural language to Python code generation</li>
            </ul>
        </div>
    </div>
</body>
</html>